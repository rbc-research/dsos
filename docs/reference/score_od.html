<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Predict Isolation Scores — score_od • dsos</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/journal/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Predict Isolation Scores — score_od"><meta property="og:description" content="Predict isolation scores using (extended) isolation forest with the
isotree package. The prefix od stands for outlier detection,
the relevant notion of outlyingness. This function is useful to test for
dataset shift via density-based scores: isolation scores are inversely
related, if not quite proportional, to densities."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dsos</a>
        <span class="version label label-info" data-toggle="tooltip" data-placement="bottom" title="">0.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/diy-score.html">Bring Your Own Scores</a>
    </li>
    <li>
      <a href="../articles/motivation.html">A 10-minute Crash Course</a>
    </li>
    <li>
      <a href="../articles/dependencies.html">Acknowledgements</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/vathymut/dsos/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Predict Isolation Scores</h1>
    <small class="dont-index">Source: <a href="https://github.com/vathymut/dsos/blob/HEAD/R/score-permutations.R" class="external-link"><code>R/score-permutations.R</code></a></small>
    <div class="hidden name"><code>score_od.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Predict isolation scores using (extended) isolation forest with the
<span class="pkg">isotree</span> package. The prefix <em>od</em> stands for outlier detection,
the relevant notion of outlyingness. This function is useful to test for
dataset shift via density-based scores: isolation scores are inversely
related, if not quite proportional, to densities.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">score_od</span><span class="op">(</span><span class="va">x_train</span>, <span class="va">x_test</span>, n_trees <span class="op">=</span> <span class="fl">500L</span>, threshold <span class="op">=</span> <span class="fl">0.6</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x_train</dt>
<dd><p>Training (reference) sample.</p></dd>


<dt>x_test</dt>
<dd><p>Test sample.</p></dd>


<dt>n_trees</dt>
<dd><p>The number of trees in isolation forest.</p></dd>


<dt>threshold</dt>
<dd><p>Decision threshold. Set to a default value of 0.6,
following Chabchoub et al. (2022). Outlier scores higher than the threshold
are considered outliers, and lower values are inliers.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A named list or object of class <code>outlier.test</code> containing:</p><ul><li><p><code>train</code>: vector of scores in training set</p></li>
<li><p><code>test</code>: vector of scores in test set</p></li>
</ul></div>
    <div id="notes">
    <h2>Notes</h2>
    

<p>Isolation forest detects <em>isolated</em> points that are typically
out-of-distribution relative to the high-density regions of the data
distribution. Any performant method for density-based out-of-distribution
detection can replace isolation forest. The decision threshold,
<code>threshold</code>, clips (winsorizes) the scores so that lower scores are
set to the threshold value.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Liu, F. T., Ting, K. M., &amp; Zhou, Z. H. (2008, December).
<em>Isolation forest</em>.
In 2008 Eighth IEEE International Conference on Data Mining (pp. 413-422).
IEEE.</p>
<p>Chabchoub, Y., Togbe, M. U., Boly, A., &amp; Chiky, R. (2022).
<em>An in-depth study and improvement of Isolation Forest.</em>.
IEEE Access, 10, 10219-10237.</p>
<p>#' @details
<code>score_od</code> first fits to the training data and then predict in-sample
for this reference sample. Then it predicts out-of-sample for the test set.
As a result, estimating p-value via permutations require refitting the
algorithm for every permutation.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other scoring: 
<code><a href="score_cp.html">score_cp</a>()</code>,
<code><a href="score_rd.html">score_rd</a>()</code>,
<code><a href="score_rue.html">score_rue</a>()</code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/vathymut/dsos" class="external-link">dsos</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">12345</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">setosa</span> <span class="op">&lt;-</span> <span class="va">iris</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">50</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span> <span class="co"># Training sample: Species == 'setosa'</span></span></span>
<span class="r-in"><span><span class="va">versicolor</span> <span class="op">&lt;-</span> <span class="va">iris</span><span class="op">[</span><span class="fl">51</span><span class="op">:</span><span class="fl">100</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span> <span class="co"># Test sample: Species == 'versicolor'</span></span></span>
<span class="r-in"><span><span class="fu">score_od</span><span class="op">(</span><span class="va">setosa</span>, <span class="va">versicolor</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $test</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       51       52       53       54       55       56       57       58 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.674343 0.672536 0.674081 0.673545 0.672993 0.672098 0.676666 0.664948 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       59       60       61       62       63       64       65       66 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.673706 0.673943 0.668086 0.673942 0.665721 0.674062 0.670799 0.673192 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       67       68       69       70       71       72       73       74 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.675250 0.666555 0.675013 0.667670 0.678094 0.672884 0.674463 0.671084 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       75       76       77       78       79       80       81       82 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.672640 0.673440 0.673128 0.675084 0.673138 0.665407 0.669511 0.665245 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       83       84       85       86       87       88       89       90 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.670312 0.676072 0.676918 0.678196 0.674158 0.670614 0.673113 0.673591 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       91       92       93       94       95       96       97       98 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.671322 0.672497 0.670786 0.668197 0.672671 0.672231 0.673275 0.671262 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       99      100 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.666917 0.671606 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $train</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        1        2        3        4        5        6        7        8 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.600000 0.600000 0.600000 0.600000 0.600000 0.600000 0.600000 0.600000 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        9       10       11       12       13       14       15       16 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.600000 0.600000 0.600000 0.600000 0.600000 0.600000 0.600000 0.600000 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       17       18       19       20       21       22       23       24 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.600000 0.600000 0.600000 0.600000 0.600000 0.600000 0.600000 0.600000 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       25       26       27       28       29       30       31       32 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.600000 0.600000 0.600000 0.600000 0.600000 0.600000 0.600000 0.600000 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       33       34       35       36       37       38       39       40 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.600000 0.600000 0.600000 0.600000 0.600000 0.600000 0.600000 0.600000 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       41       42       43       44       45       46       47       48 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.600000 0.604261 0.600000 0.600000 0.600000 0.600000 0.600000 0.600000 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       49       50 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.600000 0.600000 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Vathy M. Kamulete.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

